<!DOCTYPE html>
<html>
<head>
    <title>Product Detail</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body class="p-4">
    <div class="container">
        <h2 class="mb-4">Product Details</h2>

        <!-- Display the product image if available -->
        {% if product.ImageURL %}
        <div class="mb-4 text-center">
            <img src="{{ product.ImageURL }}" alt="{{ product.Name }}" class="img-fluid" style="max-height: 300px;">
        </div>
        {% endif %}

        <ul class="list-group mb-4">
            <li class="list-group-item"><strong>_id:</strong> {{ product._id }}</li>
            {% if product.Name %}
                <li class="list-group-item"><strong>Name:</strong> {{ product.Name }}</li>
            {% endif %}
            {% if product.Brand %}
                <li class="list-group-item"><strong>Brand:</strong> {{ product.Brand }}</li>
            {% endif %}
            {% if product.price %}
                <li class="list-group-item"><strong>Price:</strong> ${{ product.price }}</li>
            {% endif %}
            {% if product.ID %}
                <li class="list-group-item"><strong>ID:</strong> {{ product.ID }}</li>
            {% endif %}
            {% if product.ProdID %}
                <li class="list-group-item"><strong>ProdID:</strong> {{ product.ProdID }}</li>
            {% endif %}
            {% if product.Rating is defined %}
                <li class="list-group-item"><strong>Rating:</strong> {{ product.Rating }}</li>
            {% endif %}
            {% if product.ReviewCount is defined %}
                <li class="list-group-item"><strong>Review Count:</strong> {{ product.ReviewCount }}</li>
            {% endif %}
            {% if product.Category %}
                <li class="list-group-item"><strong>Category:</strong> {{ product.Category }}</li>
            {% endif %}
            {% if product.Tags %}
                <li class="list-group-item"><strong>Tags:</strong> {{ product.Tags }}</li>
            {% endif %}
        </ul>

        <a href="{{ url_for('index') }}" class="btn btn-secondary mb-4">‚Üê Back to Products</a>

        <!-- üî• Recommended Products Section -->
        {% if recommendations %}
        <h4 class="mt-5">You may also like</h4>
        <div class="row mt-3">
            {% for rec in recommendations %}
            <div class="col-md-3 mb-3">
                <div class="card h-100 shadow-sm">
                    {% if rec.ImageURL %}
                    <img src="{{ rec.ImageURL }}" class="card-img-top" alt="{{ rec.Name }}" style="height: 150px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body p-2">
                        <h6 class="card-title mb-1">{{ rec.Name or 'No Name' }}</h6>
                        {% if rec.price %}
                        <p class="card-text text-muted mb-1">$ {{ rec.price }}</p>
                        {% endif %}
                        <a href="{{ url_for('product_detail', product_id=rec._id) }}" class="btn btn-sm btn-outline-primary btn-block">View</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</body>
</html>
