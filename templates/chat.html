<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat with us!</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6 bg-gray-50">
    <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-md p-6">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800">Chat with us!</h2>

        <div id="chat-box" class="border border-gray-300 rounded-lg p-4 h-96 overflow-y-scroll bg-gray-100 mb-4 space-y-2">
            <!-- Messages will appear here -->
        </div>

        <div class="flex gap-2">
            <input type="text" id="input" placeholder="Type a message..."
                class="flex-grow px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <button onclick="sendMessage()"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Send</button>
        </div>
    </div>

    <script>
        async function sendMessage() {
            const input = document.getElementById('input');
            const msg = input.value.trim();
            if (!msg) return;

            addMessage("You", msg, "text-blue-600");
            input.value = "";

            const response = await fetch("/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: msg })
            });

            const data = await response.json();
            if (data.response) {
                addMessage("Bot", data.response, "text-green-600");
            } else {
                addMessage("Bot", "Error: " + (data.error || "Unknown error"), "text-red-600");
            }
        }

        function addMessage(sender, text, cls) {
            const box = document.getElementById('chat-box');
            const div = document.createElement("div");
            div.className = `text-sm ${cls}`;
            div.innerHTML = `<strong>${sender}:</strong> ${text}`;
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
        }
    </script>
</body>
</html>
